(function(){"use strict";var isArray=Array.isArray||function isArray(item){return item.toString()=="[object Array]"};function getMap(data){if(isArray(data)){return function(map){return map==null?data:data.map(map)}}else{return function(map){if(map==null)return data;var results=[];for(var key in data){results.push(map(data[key],key))}return results}}}function reduce(data,fn,result){for(var i=0,len=data.length;i<len;i++){result=fn(result,data[i],i)}return result}function mapreduce(map,fns){var mapFn=fns.map;var reduceFn=fns.reduce;var init=fns.init;var mapped=map(mapFn);return reduceFn==null?mapped:reduce(mapped,reduceFn,init)}function collect(data,maps,options){if(data==null||data.length===0||maps==null)return{};var map=getMap(data);if(maps.map!=null||maps.reduce!=null){return mapreduce(map,maps)}else{var collection={};for(var key in maps){collection[key]=mapreduce(map,maps[key])}return collection}}typeof exports!="undefined"?module.exports=collect:window.collect=collect})();